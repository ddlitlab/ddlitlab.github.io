{{ if .Site.Params.alert -}}
{{ partial "header/alert.html" . }}
{{ end -}}

<header class="main-header">
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="nav-container">

      <a class="logo" href="{{ .Site.Home.RelPermalink }}">
        <img src="{{ .Site.Params.mainMenuLogo | relURL }}" alt="DDLitLab logo">
        {{ .Site.Title }}
      </a>
      
      <input type="checkbox" id="nav-toggle" aria-hidden="true">
      
      <label for="nav-toggle" class="hamburger" aria-label="Toggle navigation menu">
        <div></div>
        <div></div>
        <div></div>
      </label>
      
      <ul class="nav-links" role="menubar" aria-label="Main navigation menu">
        {{- $current := . -}}
        {{- $section := $current.Section -}}
        {{ range .Site.Menus.main -}}
        {{- $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) -}}
        {{- $active = or $active (eq .Name $current.LinkTitle) -}}
        {{- $active = or $active (and (eq .Name ($section | humanize)) (eq $current.Section $section)) -}}
        {{/*  {{- $active = or $active (and (eq .Name "Blog") (eq $current.Section "blog" "contributors")) -}}  */}}
        
        <li role="none">
          <a class="link-hover" href="{{ .URL | relLangURL }}" role="menuitem"
            {{- if hasPrefix .URL "http" }} target="_blank" rel="noopener noreferrer" aria-label="{{ .Name }} (opens in new tab)"{{ else }} aria-label="{{ .Name }}"{{ end -}}
            {{ with .Title }} title='{{ . }}'{{ end }}>
            {{ .Name }} {{ .Pre }}
          </a>
        </li>
        
        {{ end -}}

        {{ if hugo.IsMultilingual -}}
        <li>
          {{ $currentLang := .Site.Language.Lang }}
          {{ $translation := false }}

          {{ if .IsTranslated }}
            {{ range .Translations }}
              {{ if ne .Lang $currentLang }}
                {{ $translation = . }}
              {{ break }}
              {{ end }}
            {{ end }}
          {{ end }}

          {{ if not $translation }}
            {{ range .Site.Home.AllTranslations }}
              {{ if ne .Lang $currentLang }}
                {{ $translation = . }}
              {{ break }}
              {{ end }}
            {{ end }}
          {{ end }}

          {{ if $translation }}
            <a class="link-hover" href="{{ $translation.RelPermalink }}" rel="alternate" hreflang="{{ $translation.Lang }}" lang="{{ $translation.Lang }}"{{ with $translation.Title }} title='{{ . }}' aria-label='{{ . }}'{{ end }}>
              {{ upper $translation.Lang }}
            </a>
          {{ end }}
          {{ end -}}
          </li>
        </ul>
    </div>
  </nav>
</header>